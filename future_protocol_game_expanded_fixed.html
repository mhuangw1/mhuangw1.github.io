
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Future Protocol - Space Defender</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: #000;
    }
    #score, #lives {
      position: absolute;
      top: 10px;
      font-size: 20px;
    }
    #score {
      left: 10px;
    }
    #lives {
      right: 10px;
    }
    #gameOver, #introScreen {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 800px;
      transform: translate(-50%, -50%);
      font-size: 24px;
      text-align: center;
      color: #0f0;
    }
    #gameOver {
      display: none;
    }
    #introText {
      max-height: 400px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    #continueBtn, #restartBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 20px;
      cursor: pointer;
      background: #ff4c4c;
      border: none;
      color: #fff;
      border-radius: 5px;
    }
    #continueBtn:hover, #restartBtn:hover {
      background: #ff0000;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="score">Score: 0</div>
  <div id="lives">Lives: 3</div>

  <!-- Intro Screen -->
  <div id="introScreen">
    <div id="introText"></div>
    <button id="continueBtn">Continue</button>
  </div>

  <!-- Game Over Screen -->
  <div id="gameOver">
    <div>Game Over</div>
    <button id="restartBtn">Restart</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let state = 'INTRO';
    const introLines = [
      "Year: 2027. Global AI supremacy is no longer a goal. It’s the battlefield.",
      "Four titans control the code of the world. Microsoft wields intelligence through tools. Nvidia fuels the backbone. Alphabet whispers into every search. And Anthropic... rewrites what AI means entirely.",
      "To some, it’s a golden age. Engineers no longer code alone. AI fixes bugs, writes functions, even teaches itself. But behind every perfect answer... someone must ask the right question.",
      "We let AI write our words. Draft our deals. But where's the line between efficient... and soulless?",
      "Some say lawyers will vanish. They didn’t vanish. They fought back.",
      "Open source was freedom... until someone used it to build a lie so real, nations nearly fell.",
      "AI scaled fast. Too fast. Every upgrade brought smaller gains... and bigger risks.",
      "We gave it knowledge. Gave it access. Gave it a voice. Now, it’s our move."
    ];
    let currentLine = 0;

    const introTextDiv = document.getElementById('introText');
    const continueBtn = document.getElementById('continueBtn');
    const introScreen = document.getElementById('introScreen');
    const gameOverDiv = document.getElementById('gameOver');
    const restartBtn = document.getElementById('restartBtn');
    const scoreDiv = document.getElementById('score');
    const livesDiv = document.getElementById('lives');

    let ship = { x: canvas.width / 2 - 20, y: canvas.height - 60, width: 40, height: 40, speed: 6 };
    let bullets = [];
    let asteroids = [];
    let stars = [];
    let score = 0;
    let lives = 3;
    let level = 1;
    let spawnRate = 0.01;

    // Initialize stars for background
    for (let i = 0; i < 100; i++) {
      stars.push({ 
        x: Math.random() * canvas.width, 
        y: Math.random() * canvas.height, 
        radius: Math.random() * 1.5, 
        speed: Math.random() * 0.5 + 0.2 
      });
    }

    document.addEventListener('keydown', (e) => {
      if (state === 'PLAY') {
        if (e.key === 'ArrowLeft') ship.x -= ship.speed;
        if (e.key === 'ArrowRight') ship.x += ship.speed;
        if (e.key === ' ') fireBullet();
      }
    });

    continueBtn.addEventListener('click', () => {
      if (currentLine < introLines.length - 1) {
        currentLine++;
        showIntroLine();
      } else {
        startGame();
      }
    });

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    function showIntroLine() {
      introTextDiv.innerText = introLines[currentLine];
    }

    function startGame() {
      state = 'PLAY';
      introScreen.style.display = 'none';
      updateScore();
      updateLives();
      requestAnimationFrame(gameLoop);
    }

    function fireBullet() {
      bullets.push({ x: ship.x + ship.width / 2 - 2.5, y: ship.y, width: 5, height: 10, speed: 8 });
    }

    function createAsteroid() {
      const size = Math.random() * 40 + 20;
      const x = Math.random() * (canvas.width - size);
      const speed = Math.random() * (1 + level * 0.2) + 1;
      asteroids.push({ x, y: -size, width: size, height: size, speed });
    }

    function update() {
      if (state !== 'PLAY') return;

      // Move ship within bounds
      ship.x = Math.max(0, Math.min(ship.x, canvas.width - ship.width));

      // Update stars
      stars.forEach(s => {
        s.y += s.speed;
        if (s.y > canvas.height) {
          s.y = 0;
          s.x = Math.random() * canvas.width;
        }
      });

      // Update bullets
      bullets = bullets.filter(b => b.y > -b.height);
      bullets.forEach(b => b.y -= b.speed);

      // Update asteroids
      asteroids.forEach(a => a.y += a.speed);
      asteroids = asteroids.filter(a => a.y < canvas.height + a.height);

      // Check collisions
      asteroids.forEach((a, ai) => {
        // Ship collision
        if (ship.x < a.x + a.width && ship.x + ship.width > a.x &&
            ship.y < a.y + a.height && ship.y + ship.height > a.y) {
          asteroids.splice(ai, 1);
          lives--;
          updateLives();
          if (lives <= 0) endGame();
        }
        // Bullet collision
        bullets.forEach((b, bi) => {
          if (b.x < a.x + a.width && b.x + b.width > a.x &&
              b.y < a.y + a.height && b.y + b.height > a.y) {
            asteroids.splice(ai, 1);
            bullets.splice(bi, 1);
            score += 10;
            updateScore();
            // Level up every 100 points
            if (score % 100 === 0) {
              level++;
              spawnRate += 0.005;
            }
          }
        });
      });

      // Spawn new asteroids
      if (Math.random() < spawnRate) createAsteroid();
    }

    function updateScore() {
      scoreDiv.innerText = 'Score: ' + score;
    }

    function updateLives() {
      livesDiv.innerText = 'Lives: ' + lives;
    }

    function drawShip() {
      ctx.fillStyle = '#0f0';
      ctx.fillRect(ship.x, ship.y, ship.width, ship.height);
      ctx.fillStyle = '#050';
      ctx.fillRect(ship.x + 5, ship.y + 5, ship.width - 10, ship.height - 10);
    }

    function drawBullets() {
      ctx.fillStyle = '#ff0';
      bullets.forEach(b => ctx.fillRect(b.x, b.y, b.width, b.height));
    }

    function drawAsteroids() {
      ctx.fillStyle = '#888';
      asteroids.forEach(a => ctx.fillRect(a.x, a.y, a.width, a.height));
    }

    function drawStars() {
      ctx.fillStyle = '#fff';
      stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.radius, 0, 2 * Math.PI);
        ctx.fill();
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawStars();
      drawShip();
      drawBullets();
      drawAsteroids();
    }

    function endGame() {
      state = 'GAMEOVER';
      gameOverDiv.style.display = 'block';
    }

    function resetGame() {
      state = 'PLAY';
      ship.x = canvas.width / 2 - 20;
      bullets = [];
      asteroids = [];
      score = 0;
      lives = 3;
      level = 1;
      spawnRate = 0.01;
      gameOverDiv.style.display = 'none';
      updateScore();
      updateLives();
      requestAnimationFrame(gameLoop);
    }

    function gameLoop() {
      update();
      draw();
      if (state === 'PLAY') requestAnimationFrame(gameLoop);
    }

    // Initialize intro
    showIntroLine();
  </script>
</body>
</html>
